// prisma/schema.prisma
// Database schema for Requirement & Effort Tracker

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// Project entity - stores project metadata
model Project {
  id                Int           @id @default(autoincrement())
  name              String        @db.VarChar(100)
  createdAt         DateTime      @default(now()) @map("created_at")
  updatedAt         DateTime      @updatedAt @map("updated_at")
  nextRequirementId Int           @default(1) @map("next_requirement_id")
  requirements      Requirement[]

  @@map("projects")
}

/// Requirement entity - stores individual requirements
model Requirement {
  id          Int      @id @default(autoincrement())
  projectId   Int      @map("project_id")
  description String   @db.VarChar(500)
  effort      Decimal  @db.Decimal(6, 2)
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId])
  @@map("requirements")
}

