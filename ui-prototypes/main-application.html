<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Requirement & Effort Tracker</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
          sans-serif;
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
      }

      .app-container {
        max-width: 1000px;
        margin: 0 auto;
      }

      /* Region R1: Project Header */
      .project-header {
        background: white;
        border-radius: 16px;
        padding: 24px 28px;
        margin-bottom: 20px;
        box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 16px;
      }

      .project-title-section {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .project-label {
        color: #6b7280;
        font-size: 14px;
        font-weight: 500;
      }

      .project-name {
        font-size: 24px;
        font-weight: 700;
        color: #1a1a2e;
      }

      .project-name-input {
        font-size: 24px;
        font-weight: 700;
        color: #1a1a2e;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 4px 12px;
        outline: none;
        display: none;
      }

      .btn-icon {
        width: 36px;
        height: 36px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .btn-edit {
        background: #f3f4f6;
        color: #6b7280;
      }

      .btn-edit:hover {
        background: #e5e7eb;
        color: #374151;
      }

      .btn-reset {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        padding: 10px 20px;
        width: auto;
        font-size: 14px;
        font-weight: 600;
        gap: 8px;
      }

      .btn-reset:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
      }

      .btn-icon svg {
        width: 18px;
        height: 18px;
      }

      /* Region R2: Summary Panel */
      .summary-panel {
        background: white;
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
      }

      .summary-card {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
      }

      .summary-card.primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .summary-value {
        font-size: 32px;
        font-weight: 700;
        color: #1a1a2e;
        margin-bottom: 4px;
      }

      .summary-card.primary .summary-value {
        color: white;
      }

      .summary-label {
        font-size: 13px;
        color: #6b7280;
        font-weight: 500;
      }

      .summary-card.primary .summary-label {
        color: rgba(255, 255, 255, 0.85);
      }

      /* Region R3: Add Requirement Form */
      .add-form-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
      }

      .form-title {
        font-size: 16px;
        font-weight: 600;
        color: #374151;
        margin-bottom: 16px;
      }

      .add-form {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .form-group {
        flex: 1;
        min-width: 200px;
      }

      .form-group.effort {
        flex: 0 0 140px;
        min-width: 140px;
      }

      .form-group label {
        display: block;
        font-size: 13px;
        font-weight: 600;
        color: #374151;
        margin-bottom: 6px;
      }

      .form-group input {
        width: 100%;
        padding: 12px 14px;
        border: 2px solid #e5e7eb;
        border-radius: 10px;
        font-size: 15px;
        transition: all 0.2s ease;
        outline: none;
      }

      .form-group input:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .form-group input.error {
        border-color: #ef4444;
      }

      .form-group .error-text {
        color: #ef4444;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }

      .form-group .error-text.visible {
        display: block;
      }

      .btn-add {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 12px 24px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        align-self: flex-end;
        margin-bottom: 0;
      }

      .btn-add:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px -8px rgba(102, 126, 234, 0.5);
      }

      .btn-add svg {
        width: 18px;
        height: 18px;
      }

      /* Region R5: Display Controls */
      .display-controls {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 12px;
      }

      .toggle-effort {
        display: flex;
        align-items: center;
        gap: 10px;
        background: white;
        padding: 8px 16px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        cursor: pointer;
      }

      .toggle-effort input {
        display: none;
      }

      .toggle-switch {
        width: 44px;
        height: 24px;
        background: #e5e7eb;
        border-radius: 12px;
        position: relative;
        transition: all 0.2s ease;
      }

      .toggle-switch::after {
        content: "";
        position: absolute;
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .toggle-effort input:checked + .toggle-switch {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .toggle-effort input:checked + .toggle-switch::after {
        left: 22px;
      }

      .toggle-label {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
      }

      /* Region R4: Requirements List */
      .requirements-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }

      .requirements-header {
        display: grid;
        grid-template-columns: 60px 1fr 100px 80px 100px;
        padding: 16px 20px;
        background: #f8fafc;
        border-bottom: 2px solid #e5e7eb;
        font-size: 13px;
        font-weight: 600;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .requirements-header.hide-effort {
        grid-template-columns: 60px 1fr 80px 100px;
      }

      .requirements-list {
        max-height: 400px;
        overflow-y: auto;
      }

      .requirement-row {
        display: grid;
        grid-template-columns: 60px 1fr 100px 80px 100px;
        padding: 16px 20px;
        border-bottom: 1px solid #f1f5f9;
        align-items: center;
        transition: all 0.2s ease;
      }

      .requirement-row.hide-effort {
        grid-template-columns: 60px 1fr 80px 100px;
      }

      .requirement-row:hover {
        background: #f8fafc;
      }

      .requirement-row.inactive {
        opacity: 0.6;
      }

      .requirement-row.inactive .req-description {
        text-decoration: line-through;
        color: #9ca3af;
      }

      .req-id {
        font-weight: 600;
        color: #667eea;
        font-size: 14px;
      }

      .req-description {
        color: #1a1a2e;
        font-size: 15px;
        padding-right: 16px;
      }

      .req-effort {
        text-align: right;
        font-weight: 600;
        color: #374151;
        font-size: 15px;
      }

      .req-status {
        display: flex;
        justify-content: center;
      }

      .status-toggle {
        width: 48px;
        height: 26px;
        background: #e5e7eb;
        border-radius: 13px;
        position: relative;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .status-toggle.active {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }

      .status-toggle::after {
        content: "";
        position: absolute;
        width: 22px;
        height: 22px;
        background: white;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .status-toggle.active::after {
        left: 24px;
      }

      .req-actions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .btn-action {
        width: 32px;
        height: 32px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .btn-action svg {
        width: 16px;
        height: 16px;
      }

      .btn-action.edit {
        background: #eff6ff;
        color: #3b82f6;
      }

      .btn-action.edit:hover {
        background: #dbeafe;
      }

      .btn-action.delete {
        background: #fef2f2;
        color: #ef4444;
      }

      .btn-action.delete:hover {
        background: #fee2e2;
      }

      .empty-state {
        padding: 60px 20px;
        text-align: center;
      }

      .empty-state svg {
        width: 80px;
        height: 80px;
        color: #d1d5db;
        margin-bottom: 16px;
      }

      .empty-state h3 {
        color: #6b7280;
        font-size: 18px;
        margin-bottom: 8px;
      }

      .empty-state p {
        color: #9ca3af;
        font-size: 14px;
      }

      /* Edit mode styles */
      .requirement-row.editing {
        background: #eff6ff;
        border: 2px solid #667eea;
        border-radius: 8px;
        margin: 8px;
        padding: 14px 18px;
      }

      .edit-input {
        width: 100%;
        padding: 8px 12px;
        border: 2px solid #e5e7eb;
        border-radius: 6px;
        font-size: 14px;
        outline: none;
      }

      .edit-input:focus {
        border-color: #667eea;
      }

      .edit-actions {
        display: flex;
        gap: 8px;
      }

      .btn-save,
      .btn-cancel {
        padding: 6px 14px;
        border: none;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-save {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
      }

      .btn-cancel {
        background: #f3f4f6;
        color: #6b7280;
      }

      /* Modal styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal-overlay.visible {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background: white;
        border-radius: 16px;
        padding: 32px;
        max-width: 420px;
        width: 90%;
        transform: scale(0.9);
        transition: all 0.3s ease;
      }

      .modal-overlay.visible .modal {
        transform: scale(1);
      }

      .modal-icon {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
      }

      .modal-icon.warning {
        background: #fef2f2;
        color: #ef4444;
      }

      .modal-icon svg {
        width: 28px;
        height: 28px;
      }

      .modal h2 {
        text-align: center;
        font-size: 20px;
        color: #1a1a2e;
        margin-bottom: 12px;
      }

      .modal p {
        text-align: center;
        color: #6b7280;
        font-size: 15px;
        margin-bottom: 8px;
      }

      .modal .warning-text {
        color: #ef4444;
        font-weight: 500;
      }

      .modal-actions {
        display: flex;
        gap: 12px;
        margin-top: 24px;
      }

      .modal-actions button {
        flex: 1;
        padding: 12px 20px;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .modal-actions .btn-modal-cancel {
        background: #f3f4f6;
        color: #374151;
      }

      .modal-actions .btn-modal-confirm {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
      }

      .modal-actions .btn-modal-confirm:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Region R1: Project Header -->
      <header class="project-header">
        <div class="project-title-section">
          <div>
            <span class="project-label">Project</span>
            <h1 class="project-name" id="projectName">My Awesome Project</h1>
            <input
              type="text"
              class="project-name-input"
              id="projectNameInput"
              value="My Awesome Project"
              maxlength="100"
            />
          </div>
          <button
            class="btn-icon btn-edit"
            id="editProjectBtn"
            title="Edit project name"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" />
              <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
            </svg>
          </button>
        </div>
        <button class="btn-icon btn-reset" id="resetBtn">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
            <path d="M21 12a9 9 0 01-9 9 9.75 9.75 0 01-6.74-2.74L3 16" />
            <path d="M8 16H3v5" />
          </svg>
          <span>New Project</span>
        </button>
      </header>

      <!-- Region R2: Summary Panel -->
      <section class="summary-panel">
        <div class="summary-grid">
          <div class="summary-card primary">
            <div class="summary-value" id="totalEffort">42.5</div>
            <div class="summary-label">Total Active Effort</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="totalCount">5</div>
            <div class="summary-label">Total Requirements</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="activeCount">4</div>
            <div class="summary-label">Active</div>
          </div>
          <div class="summary-card">
            <div class="summary-value" id="inactiveCount">1</div>
            <div class="summary-label">Inactive</div>
          </div>
        </div>
      </section>

      <!-- Region R3: Add Requirement Form -->
      <section class="add-form-card">
        <h2 class="form-title">Add New Requirement</h2>
        <form class="add-form" id="addForm">
          <div class="form-group">
            <label for="description">Requirement Description</label>
            <input
              type="text"
              id="description"
              placeholder="Enter requirement description"
              maxlength="500"
            />
            <div class="error-text" id="descError">Description is required</div>
          </div>
          <div class="form-group effort">
            <label for="effort">Effort</label>
            <input
              type="number"
              id="effort"
              placeholder="0"
              min="0.01"
              max="9999"
              step="0.01"
            />
            <div class="error-text" id="effortError">Effort is required</div>
          </div>
          <button type="submit" class="btn-add">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 5v14M5 12h14" />
            </svg>
            Add
          </button>
        </form>
      </section>

      <!-- Region R5: Display Controls -->
      <div class="display-controls">
        <label class="toggle-effort">
          <span class="toggle-label">Show Effort</span>
          <input type="checkbox" id="showEffort" checked />
          <span class="toggle-switch"></span>
        </label>
      </div>

      <!-- Region R4: Requirements List -->
      <section class="requirements-card">
        <div class="requirements-header" id="reqHeader">
          <span>ID</span>
          <span>Description</span>
          <span class="effort-col">Effort</span>
          <span>Status</span>
          <span>Actions</span>
        </div>
        <div class="requirements-list" id="reqList">
          <!-- Sample requirements will be rendered here -->
        </div>
      </section>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
      <div class="modal">
        <div class="modal-icon warning">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
            />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
          </svg>
        </div>
        <h2>Delete Requirement</h2>
        <p>Are you sure you want to delete this requirement?</p>
        <p id="deleteReqPreview" style="font-weight: 600; color: #1a1a2e">
          #1: User authentication feature
        </p>
        <p class="warning-text">This action cannot be undone.</p>
        <div class="modal-actions">
          <button class="btn-modal-cancel" onclick="closeDeleteModal()">
            Cancel
          </button>
          <button class="btn-modal-confirm" onclick="confirmDelete()">
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div class="modal-overlay" id="resetModal">
      <div class="modal">
        <div class="modal-icon warning">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"
            />
            <line x1="12" y1="9" x2="12" y2="13" />
            <line x1="12" y1="17" x2="12.01" y2="17" />
          </svg>
        </div>
        <h2>Start New Project</h2>
        <p>Are you sure you want to start a new project?</p>
        <p style="text-align: left; margin-top: 16px">
          All current data will be permanently deleted:
        </p>
        <ul
          style="
            text-align: left;
            color: #6b7280;
            margin: 8px 0 8px 20px;
            font-size: 14px;
          "
        >
          <li>Project name</li>
          <li>All requirements</li>
          <li>All effort values</li>
        </ul>
        <p class="warning-text">This action cannot be undone.</p>
        <div class="modal-actions">
          <button class="btn-modal-cancel" onclick="closeResetModal()">
            Cancel
          </button>
          <button class="btn-modal-confirm" onclick="confirmReset()">
            Reset
          </button>
        </div>
      </div>
    </div>

    <script>
      // Sample data
      const requirements = [
        {
          id: 1,
          description: "User authentication and login system",
          effort: 8,
          active: true,
        },
        {
          id: 2,
          description: "Dashboard with analytics overview",
          effort: 13,
          active: true,
        },
        {
          id: 3,
          description: "Export data to CSV and PDF formats",
          effort: 5,
          active: true,
        },
        {
          id: 4,
          description: "Email notification system",
          effort: 8.5,
          active: false,
        },
        {
          id: 5,
          description: "User profile management",
          effort: 8,
          active: true,
        },
      ];

      let showEffort = true;
      let editingId = null;
      let deleteTargetId = null;

      // Render requirements list
      function renderRequirements() {
        const list = document.getElementById("reqList");
        const header = document.getElementById("reqHeader");

        if (requirements.length === 0) {
          list.innerHTML = `
            <div class="empty-state">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
              </svg>
              <h3>No requirements yet</h3>
              <p>Add your first requirement above to get started.</p>
            </div>
          `;
          return;
        }

        header.className = showEffort
          ? "requirements-header"
          : "requirements-header hide-effort";

        list.innerHTML = requirements
          .map(
            (req) => `
          <div class="requirement-row ${req.active ? "" : "inactive"} ${showEffort ? "" : "hide-effort"}" data-id="${req.id}">
            <span class="req-id">#${req.id}</span>
            <span class="req-description">${req.description}</span>
            ${showEffort ? `<span class="req-effort">${formatEffort(req.effort)}</span>` : ""}
            <div class="req-status">
              <div class="status-toggle ${req.active ? "active" : ""}" onclick="toggleStatus(${req.id})"></div>
            </div>
            <div class="req-actions">
              <button class="btn-action edit" onclick="editRequirement(${req.id})" title="Edit">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
              </button>
              <button class="btn-action delete" onclick="showDeleteModal(${req.id})" title="Delete">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                </svg>
              </button>
            </div>
          </div>
        `,
          )
          .join("");

        updateSummary();
      }

      function formatEffort(value) {
        return Number.isInteger(value) ? value : value.toFixed(2);
      }

      function updateSummary() {
        const active = requirements.filter((r) => r.active);
        const totalEffort = active.reduce((sum, r) => sum + r.effort, 0);

        document.getElementById("totalEffort").textContent =
          formatEffort(totalEffort);
        document.getElementById("totalCount").textContent = requirements.length;
        document.getElementById("activeCount").textContent = active.length;
        document.getElementById("inactiveCount").textContent =
          requirements.length - active.length;
      }

      function toggleStatus(id) {
        const req = requirements.find((r) => r.id === id);
        if (req) {
          req.active = !req.active;
          renderRequirements();
        }
      }

      // Toggle effort column visibility
      document
        .getElementById("showEffort")
        .addEventListener("change", function () {
          showEffort = this.checked;
          document.querySelector(".toggle-label").textContent = showEffort
            ? "Show Effort"
            : "Hide Effort";
          renderRequirements();
        });

      // Add requirement form
      document
        .getElementById("addForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const descInput = document.getElementById("description");
          const effortInput = document.getElementById("effort");
          const desc = descInput.value.trim();
          const effort = parseFloat(effortInput.value);

          let valid = true;

          if (!desc) {
            document.getElementById("descError").classList.add("visible");
            descInput.classList.add("error");
            valid = false;
          } else {
            document.getElementById("descError").classList.remove("visible");
            descInput.classList.remove("error");
          }

          if (!effort || effort <= 0 || effort > 9999) {
            document.getElementById("effortError").classList.add("visible");
            effortInput.classList.add("error");
            valid = false;
          } else {
            document.getElementById("effortError").classList.remove("visible");
            effortInput.classList.remove("error");
          }

          if (valid) {
            const newId = Math.max(...requirements.map((r) => r.id), 0) + 1;
            requirements.push({
              id: newId,
              description: desc,
              effort: Math.round(effort * 100) / 100,
              active: true,
            });
            descInput.value = "";
            effortInput.value = "";
            renderRequirements();
            descInput.focus();
          }
        });

      // Edit project name
      const projectName = document.getElementById("projectName");
      const projectNameInput = document.getElementById("projectNameInput");
      const editProjectBtn = document.getElementById("editProjectBtn");

      editProjectBtn.addEventListener("click", function () {
        projectName.style.display = "none";
        projectNameInput.style.display = "block";
        projectNameInput.focus();
        projectNameInput.select();
      });

      projectNameInput.addEventListener("blur", saveProjectName);
      projectNameInput.addEventListener("keydown", function (e) {
        if (e.key === "Enter") saveProjectName();
        if (e.key === "Escape") {
          projectNameInput.value = projectName.textContent;
          projectName.style.display = "block";
          projectNameInput.style.display = "none";
        }
      });

      function saveProjectName() {
        const value = projectNameInput.value.trim();
        if (value) {
          projectName.textContent = value;
        } else {
          projectNameInput.value = projectName.textContent;
        }
        projectName.style.display = "block";
        projectNameInput.style.display = "none";
      }

      // Delete modal
      function showDeleteModal(id) {
        deleteTargetId = id;
        const req = requirements.find((r) => r.id === id);
        document.getElementById("deleteReqPreview").textContent =
          `#${req.id}: ${req.description.substring(0, 50)}${req.description.length > 50 ? "..." : ""}`;
        document.getElementById("deleteModal").classList.add("visible");
      }

      function closeDeleteModal() {
        document.getElementById("deleteModal").classList.remove("visible");
        deleteTargetId = null;
      }

      function confirmDelete() {
        if (deleteTargetId) {
          const index = requirements.findIndex((r) => r.id === deleteTargetId);
          if (index > -1) requirements.splice(index, 1);
          renderRequirements();
        }
        closeDeleteModal();
      }

      // Reset modal
      document
        .getElementById("resetBtn")
        .addEventListener("click", function () {
          document.getElementById("resetModal").classList.add("visible");
        });

      function closeResetModal() {
        document.getElementById("resetModal").classList.remove("visible");
      }

      function confirmReset() {
        window.location.href = "project-setup.html";
      }

      // Close modals on overlay click
      document.querySelectorAll(".modal-overlay").forEach((overlay) => {
        overlay.addEventListener("click", function (e) {
          if (e.target === this) {
            this.classList.remove("visible");
          }
        });
      });

      // Close modals on Escape key
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          document
            .querySelectorAll(".modal-overlay.visible")
            .forEach((m) => m.classList.remove("visible"));
        }
      });

      // Edit requirement (simplified for prototype)
      function editRequirement(id) {
        alert(
          "Edit mode would be enabled for requirement #" +
            id +
            ".\n\nIn the full application, this would enable inline editing.",
        );
      }

      // Initial render
      renderRequirements();
    </script>
  </body>
</html>
